{% extends 'layout.html' %}

{% block title %}Î‘Î½Î±Ï†Î¿ÏÎ­Ï‚ Î•ÎºÏ„ÏÏ€Ï‰ÏƒÎ·Ï‚ - {{ student.name }} ({{ month }}){% endblock %}

{% block content %}

<style>
    /* Î•Î™Î”Î™ÎšÎŸ CSS Î“Î™Î‘ Î•ÎšÎ¤Î¥Î Î©Î£Î— */
    @media print {
        /* Î‘Ï€ÏŒÎºÏÏ…ÏˆÎ· ÎºÎµÏ†Î±Î»Î¯Î´Ï‰Î½/Ï…Ï€Î¿ÏƒÎ­Î»Î¹Î´Ï‰Î½, Ï€ÎµÏÎ¹Î¸Ï‰ÏÎ¯Ï‰Î½ ÎºÎ±Î¹ Ï†ÏŒÎ½Ï„Î¿Ï… Ï„Î¿Ï… browser */
        body {
            margin-top: 0;
            padding-top: 0;
            background-color: white !important;
        }
        .container {
            width: 100% !important;
            padding: 0 !important;
        }
        .report-print-card {
            /* Î£Î—ÎœÎ‘ÎÎ¤Î™ÎšÎŸ: Î‘Ï€Î¿Ï„ÏÎ­Ï€ÎµÎ¹ Ï„Î¿ ÏƒÏ€Î¬ÏƒÎ¹Î¼Î¿ Ï„Î·Ï‚ ÎºÎ¬ÏÏ„Î±Ï‚ Î±Î½Î±Ï†Î¿ÏÎ¬Ï‚ ÏƒÎµ Î´ÏÎ¿ ÏƒÎµÎ»Î¯Î´ÎµÏ‚ */
            page-break-inside: avoid; 
            border: 1px solid #ccc !important; /* Î ÏÎ¿ÏƒÎ¸Î­Ï„Î¿Ï…Î¼Îµ Ï€ÎµÏÎ¯Î³ÏÎ±Î¼Î¼Î± Î³Î¹Î± ÎºÎ±Î»ÏÏ„ÎµÏÎ· Î¿ÏÎ¹Î¿Î¸Î­Ï„Î·ÏƒÎ· ÏƒÏ„Î·Î½ ÎµÎºÏ„ÏÏ€Ï‰ÏƒÎ· */
        }
        /* ÎšÏÏÎ²ÎµÎ¹ Ï„Î¿ navigation bar ÎºÎ±Î¹ Î¬Î»Î»Î± Î¼Î· Î±Ï€Î±ÏÎ±Î¯Ï„Î·Ï„Î± ÏƒÏ„Î¿Î¹Ï‡ÎµÎ¯Î±, Î±Î½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ ÏƒÏ„Î¿ layout.html */
        .navbar, .no-print, .btn {
            display: none !important;
        }
    }
    
    /* ÎœÎ· ÎµÎºÏ„Ï…Ï€ÏÏƒÎ¹Î¼Î± ÏƒÏ„Î¿Î¹Ï‡ÎµÎ¯Î± ÏƒÏ„Î·Î½ Î¿Î¸ÏŒÎ½Î· (Ï€.Ï‡. ÎºÎ¿Ï…Î¼Ï€Î¯ ÎµÏ€Î¹ÏƒÏ„ÏÎ¿Ï†Î®Ï‚) */
    .no-print {
        display: block; /* Î•Î¼Ï†Î±Î½Î¯Î¶ÎµÏ„Î±Î¹ ÏƒÏ„Î·Î½ Î¿Î¸ÏŒÎ½Î· */
    }
</style>

<div class="container my-5 print-area">
    <div class="text-center mb-5 no-print">
         {# ÎšÎ¿Ï…Î¼Ï€Î¯ ÎµÏ€Î¹ÏƒÏ„ÏÎ¿Ï†Î®Ï‚/ÎºÎ»ÎµÎ¹ÏƒÎ¯Î¼Î±Ï„Î¿Ï‚ Î³Î¹Î± Ï„Î¿ Ï€Î±ÏÎ¬Î¸Ï…ÏÎ¿ Ï„Î¿Ï… browser #}
         <a href="{{ url_for('view_reports') }}" class="btn btn-secondary mb-4">
            <i class="bi bi-arrow-left"></i> Î•Ï€Î¹ÏƒÏ„ÏÎ¿Ï†Î® ÏƒÏ„Î¹Ï‚ Î‘Î½Î±Ï†Î¿ÏÎ­Ï‚
         </a>
    </div>
    
    <div class="text-center mb-5">
        <h1>Î‘Î½Î±Ï†Î¿ÏÎ­Ï‚ Î ÏÎ¿ÏŒÎ´Î¿Ï… ÎœÎ±Î¸Î·Ï„Î®</h1>
        <h2 class="text-primary">{{ student.name }} ({{ student.section.name }})</h2>
        <h3 class="text-muted">ÎœÎ®Î½Î±Ï‚ Î‘Î½Î±Ï†Î¿ÏÎ¬Ï‚: {{ month }}</h3>
    </div>

    {% for report in reports %}
        <div class="card mb-4 shadow-sm border report-print-card">
            <div class="card-header bg-light border-bottom">
                <h4>ğŸ“š {{ report.course.name }}</h4>
            </div>
            <div class="card-body">
                {# Î”Î™ÎŸÎ¡Î˜Î©Î£Î—: Î‘Î»Î»Î¬Î¾Î±Î¼Îµ Ï„Î¿ | nl2br ÏƒÎµ | replace('\n', '<br>') | safe #}
                <p class="card-text">{{ report.report_text | replace('\n', '<br>') | safe }}</p>
            </div>
            <div class="card-footer small text-muted d-flex justify-content-between">
                <span>**ÎšÎ±Î¸Î·Î³Î·Ï„Î®Ï‚:** {{ report.teacher_name }}</span>
                <span>**Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± ÎšÎ±Ï„Î±Ï‡ÏÏÎ·ÏƒÎ·Ï‚:** {{ report.created_at.strftime('%d/%m/%Y') }}</span>
            </div>
        </div>
    {% endfor %}
    
    <div class="text-center mt-5">
        <p class="small text-muted">Î¤Î­Î»Î¿Ï‚ Î‘Î½Î±Ï†Î¿ÏÏÎ½ Î³Î¹Î± Ï„Î¿Î½ ÎœÎ®Î½Î±.</p>
    </div>

</div>

{% endblock %}

{% block scripts %}
<script>
    // Î•Î½ÎµÏÎ³Î¿Ï€Î¿Î¯Î·ÏƒÎ· Ï„Î¿Ï… Î´Î¹Î±Î»ÏŒÎ³Î¿Ï… ÎµÎºÏ„ÏÏ€Ï‰ÏƒÎ·Ï‚ Î¼ÏŒÎ»Î¹Ï‚ Ï†Î¿ÏÏ„ÏÏƒÎµÎ¹ Î· ÏƒÎµÎ»Î¯Î´Î±
    window.onload = function() {
        // Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î¿ÏÎ¼Îµ setTimeout Î³Î¹Î± Î½Î± Î´Î¹Î±ÏƒÏ†Î±Î»Î¯ÏƒÎ¿Ï…Î¼Îµ ÏŒÏ„Î¹ Ï„Î¿ DOM ÎºÎ±Î¹ Ï„Î¿ CSS Î­Ï‡Î¿Ï…Î½ Î±Ï€Î¿Î´Î¿Î¸ÎµÎ¯ Ï€Î»Î®ÏÏ‰Ï‚
        setTimeout(function() {
             window.print();
        }, 500); 
    };
</script>
{% endblock %}